---
date: 2017-07-28T10:46:33+08:00
title: React Native Upgrade
tags: ["reactnative"]
---
本文主要分享Android和iOS端升级RN到0.44.0版本的经验。<!--more-->

今天收到一封感谢的邮件，说是我之前的一篇文章帮助到了他，这才看了看自己的博客，发现我真的有很久没分享东西了。工作之后是真的忙，每天都需要思考很多问题，也许是在做某个需求，也许是解决某个bug，也许是解决某个瓶颈。日子很充实，收获很多，虽然很想分享出来，但是周末却总是变得懒散不想动，因而积压了很多想分享的内容。这次终于战胜自己，重新开始分享，希望能够坚持下去。

首先，我要告诉大家一件事情，我正式开始做iOS啦，撒花~ 现在产品迭代中交给我的需求如果工作量不是很大的话，那么Android和iOS端就都交给我一个人搞啦，真好。

其次，我开始接触React Native啦，撒花again~ RN在我们的产品中也是比较重要的模块，首页以及多个二级界面都是RN完成的，体验还好，但是带来的crash也不少！

考虑到我们的RN版本有点老，问题较多，所以最近对RN进行一次升级，升级到0.44.0版本，并对Android和iOS的RN模块进行代码改造。期间我主要是完成Android和iOS端RN模块代码的改造工作，另一位前端同学配合一起解决升级过程出现的问题。

作为一个接到RN升级任务的RN小白，下面我就大致介绍下自己完成这个任务时遇到的坑。

#### RN升级阶段主要完成的任务

1.替换RN新版本的依赖库，更新离线包bid等  
2.关键路径日志补全，将RN内部重要日志定向到应用日志中  
3.重点流程耗时统计，关键事件数据上报  
4.完善RN离线包的更新时机，实现离线包立即生效方案  
5.Bundle加载容错机制，暂时只在iOS端实现  
6.完善原有RN模块代码，删除无用代码和逻辑  
7. 针对iOS端实现开发阶段加载指定server上的bundle文件的调试功能  




